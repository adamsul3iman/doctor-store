<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <base href="$FLUTTER_BASE_HREF">

  <meta charset="UTF-8">
  <meta content="IE=Edge" http-equiv="X-UA-Compatible">
  <!-- ترك إدارة الـ viewport لفلاتر نفسها لتجنّب التحذيرات على الويب -->

  <!-- ===== Brand / SEO basics ===== -->
  <title>متجر الدكتور | Doctor Store</title>
  <meta name="description" content="متجر الدكتور | Doctor Store - بياضات، فرشات طبية، كهربائيات منزلية، وعروض يومية داخل الأردن.">
  <meta name="robots" content="index,follow,max-image-preview:large,max-snippet:-1,max-video-preview:-1" />
  <meta name="theme-color" content="#0A2647">
  <meta name="application-name" content="متجر الدكتور | Doctor Store">

  <!-- Language / Locale hints -->

  <!-- Google Fonts for Arabic text -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Arabic:wght@400;700&display=swap" rel="stylesheet">
  <link rel="alternate" href="https://drstore.me/" hreflang="ar-JO" />
  <link rel="alternate" href="https://drstore.me/" hreflang="x-default" />

  <!-- Canonical (تعديل الدومين إذا تغيّر) -->
  <link rel="canonical" href="https://drstore.me/" />

  <!-- Open Graph / Social Sharing -->
  <meta property="og:site_name" content="متجر الدكتور | Doctor Store" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="متجر الدكتور | Doctor Store" />
  <meta property="og:description" content="بياضات، فرشات طبية، كهربائيات منزلية، وعروض يومية داخل الأردن." />
  <meta property="og:url" content="https://drstore.me/" />
  <meta property="og:image" content="https://drstore.me/icons/Icon-512.png" />

  <!-- Twitter Cards -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="متجر الدكتور | Doctor Store" />
  <meta name="twitter:description" content="بياضات، فرشات طبية، كهربائيات منزلية، وعروض يومية داخل الأردن." />
  <meta name="twitter:image" content="https://drstore.me/icons/Icon-512.png" />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Color+Emoji&display=swap" rel="stylesheet">

  <!-- Structured Data (JSON-LD) -->
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@graph": [
        {
          "@type": "WebSite",
          "@id": "https://drstore.me/#website",
          "name": "متجر الدكتور | Doctor Store",
          "url": "https://drstore.me/",
          "inLanguage": "ar-JO",
          "publisher": { "@id": "https://drstore.me/#organization" },
          "potentialAction": {
            "@type": "SearchAction",
            "target": "https://drstore.me/search?q={search_term_string}",
            "query-input": "required name=search_term_string"
          }
        },
        {
          "@type": "Organization",
          "@id": "https://drstore.me/#organization",
          "name": "متجر الدكتور | Doctor Store",
          "url": "https://drstore.me/",
          "logo": "https://drstore.me/icons/Icon-512.png",
          "telephone": "+962791988868",
          "contactPoint": [
            {
              "@type": "ContactPoint",
              "telephone": "+962791988868",
              "contactType": "customer service",
              "areaServed": "JO",
              "availableLanguage": ["ar"]
            }
          ],
          "sameAs": [
            "https://web.facebook.com/dr.store.home.appliances",
            "https://www.instagram.com/dr.store_home_appliances"
          ]
        },
        {
          "@type": "Store",
          "@id": "https://drstore.me/#store",
          "name": "متجر الدكتور | Doctor Store",
          "url": "https://drstore.me/",
          "telephone": "+962791988868",
          "hasMap": "https://www.google.com/maps/place/?q=place_id:ChIJ79KvIQBnGxUR3pjxVOIJx68",
          "geo": {
            "@type": "GeoCoordinates",
            "latitude": 32.011875,
            "longitude": 36.014609
          },
          "address": {
            "@type": "PostalAddress",
            "addressCountry": "JO",
            "addressRegion": "الزرقاء",
            "addressLocality": "الرصيفة",
            "streetAddress": "شارع الملك حسين - بجانب مسجد مدينة الحجاج"
          }
        }
      ]
    }
  </script>

  <!-- ===== PWA ===== -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="متجر الدكتور">
  <link rel="apple-touch-icon" href="icons/Icon-192.png">
  <link rel="icon" type="image/png" href="favicon.png"/>

  <link rel="manifest" href="manifest.json">

  <script>
    let deferredPrompt;
    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;
    });
    function isInstallOptionAvailable() { return deferredPrompt != null; }
    function triggerInstallPrompt() {
      if (deferredPrompt) {
        deferredPrompt.prompt();
        deferredPrompt = null;
      }
    }
  </script>
</head>
<body>
  <noscript>
    <div style="max-width: 720px; margin: 24px auto; padding: 0 16px; font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; direction: rtl;">
      <h1 style="margin: 0 0 8px; color: #0A2647; font-size: 28px;">متجر الدكتور | Doctor Store</h1>
      <p style="margin: 0 0 12px; color: #334155; line-height: 1.8;">
        متجر إلكتروني داخل الأردن لبيع البياضات، الفرشات الطبية، والكهربائيات المنزلية. الرجاء تفعيل JavaScript لعرض المتجر.
      </p>
      <p style="margin: 0;">
        <a href="https://drstore.me/" style="color: #0A2647; font-weight: 700; text-decoration: underline;">الدخول إلى المتجر</a>
      </p>
    </div>
  </noscript>
  
  <style>
    :root {
      --primary-color: #0A2647;
      --accent-color: #D4AF37;
      --text-color: #0A2647;
      --muted-color: #7B8A9A;
      --background-start: #f7f9fc;
      --background-end: #ffffff;
    }

    /* إعدادات الصفحة الأساسية */
    body {
      margin: 0;
      padding: 0;
      height: 100vh;
      width: 100vw;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
      direction: rtl;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background:
        radial-gradient(circle at top left, rgba(212, 175, 55, 0.08), transparent 55%),
        radial-gradient(circle at bottom right, rgba(10, 38, 71, 0.08), transparent 55%),
        linear-gradient(135deg, var(--background-start), var(--background-end));
      color: var(--text-color);
    }

    /* الحاوية الرئيسية للشاشة الترحيبية */
    #loading-screen {
      position: fixed;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999; /* رقم عالي جداً ليظهر فوق التطبيق */
      background: transparent;
      transition: opacity 0.6s ease-out; /* حركة اختفاء ناعمة */
      backdrop-filter: blur(2px);
    }

    .loading-content {
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      padding: 32px 24px;
      border-radius: 24px;
      background: rgba(255, 255, 255, 0.9);
      box-shadow:
        0 18px 45px rgba(15, 23, 42, 0.14),
        0 0 0 1px rgba(148, 163, 184, 0.14);
      max-width: 320px;
      width: min(80vw, 360px);
    }

    /* هالة ذهبية ناعمة جداً خلف الشعار */
    .glow-effect {
      position: absolute;
      top: 32px;
      width: 160px;
      height: 160px;
      background: radial-gradient(circle, rgba(212, 175, 55, 0.18) 0%, rgba(255, 255, 255, 0) 70%);
      border-radius: 50%;
      z-index: 0;
      animation: softPulse 2.5s infinite ease-in-out;
    }

    /* الشعار */
    .logo {
      width: 150px; /* حجم مناسب للموبايل */
      height: 150px;
      position: relative;
      z-index: 1;
      object-fit: contain;
      animation: scaleIn 0.8s ease-out;
      filter: drop-shadow(0 10px 25px rgba(15, 23, 42, 0.18));
    }

    .brand-title {
      margin: 16px 0 4px;
      font-size: 1.4rem;
      font-weight: 700;
      letter-spacing: 0.03em;
      color: var(--primary-color);
    }

    .brand-subtitle {
      margin: 0;
      font-size: 0.9rem;
      color: var(--muted-color);
      line-height: 1.7;
    }

    /* نقاط التحميل الثلاثة أسفل الشعار */
    .dots-loader {
      display: flex;
      gap: 8px;
      margin-top: 24px;
      z-index: 2;
    }

    .dot {
      width: 10px;
      height: 10px;
      background-color: var(--primary-color); /* كحلي */
      border-radius: 50%;
      animation: bounce 1.4s infinite ease-in-out both;
    }

    .dot:nth-child(1) { animation-delay: -0.32s; }
    .dot:nth-child(2) { animation-delay: -0.16s; background-color: var(--accent-color); /* النقطة الوسطى ذهبية */ }
    .dot:nth-child(3) { animation-delay: 0s; }

    /* زر إضافة إلى الشاشة الرئيسية أعلى الصفحة */
    .install-button {
      position: fixed;
      top: 16px;
      inset-inline-end: 16px; /* تتكيّف مع RTL/LTR */
      z-index: 10000;
      display: none; /* تُظهر فقط عندما يكون خيار التثبيت متاحاً */
      align-items: center;
      gap: 6px;
      padding: 8px 14px;
      border-radius: 999px;
      border: none;
      background: linear-gradient(135deg, var(--primary-color), #163a5f);
      color: #ffffff;
      font-size: 0.8rem;
      font-weight: 500;
      cursor: pointer;
      box-shadow: 0 8px 20px rgba(15, 23, 42, 0.25);
      transition: transform 0.15s ease-out, box-shadow 0.15s ease-out, background 0.15s ease-out, opacity 0.15s ease-out;
      opacity: 0.96;
    }

    .install-button:hover {
      transform: translateY(-1px);
      box-shadow: 0 10px 26px rgba(15, 23, 42, 0.3);
      opacity: 1;
    }

    .install-button:active {
      transform: translateY(0);
      box-shadow: 0 4px 14px rgba(15, 23, 42, 0.22);
    }

    .install-button-icon {
      width: 18px;
      height: 18px;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.7);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 0.9rem;
      line-height: 1;
      background: rgba(255, 255, 255, 0.12);
    }

    .install-button-text {
      white-space: nowrap;
    }

    @media (max-width: 360px) {
      .install-button {
        top: 12px;
        inset-inline-end: 12px;
        padding: 7px 12px;
        font-size: 0.75rem;
      }

      .install-button-icon {
        width: 16px;
        height: 16px;
        font-size: 0.8rem;
      }
    }

    /* الحركات (Animations) */
    @keyframes softPulse {
      0% { transform: scale(0.8); opacity: 0.5; }
      50% { transform: scale(1.15); opacity: 0.85; }
      100% { transform: scale(0.8); opacity: 0.5; }
    }

    @keyframes scaleIn {
      from { transform: scale(0.9) translateY(8px); opacity: 0; }
      to { transform: scale(1) translateY(0); opacity: 1; }
    }

    @keyframes bounce {
      0%, 80%, 100% { transform: scale(0); }
      40% { transform: scale(1); }
    }

    /* مراعاة حجم الشاشات المختلفة */
    @media (min-width: 768px) {
      .loading-content {
        padding: 40px 32px;
        border-radius: 28px;
        max-width: 360px;
      }

      .logo {
        width: 170px;
        height: 170px;
      }

      .brand-title {
        font-size: 1.6rem;
      }
    }

    @media (max-width: 360px) {
      .loading-content {
        padding: 24px 18px;
      }

      .logo {
        width: 120px;
        height: 120px;
      }
    }

    /* احترام إعدادات المستخدم إذا كان لا يفضل الحركات */
    @media (prefers-reduced-motion: reduce) {
      * {
        animation-duration: 0.001ms !important;
        animation-iteration-count: 1 !important;
        scroll-behavior: auto !important;
        transition-duration: 0.001ms !important;
      }
    }
  </style>


  <!-- Flutter Build Config - Required for flutter.js loader -->
  <script>
    window._flutter = window._flutter || {};
    window._flutter.buildConfig = {
      engineRevision: "unknown",
      buildNumber: "1",
      buildVersion: "1.0.0"
    };
  </script>
  <script>
    // Force fresh load of flutter.js with timestamp
    var script = document.createElement('script');
    script.src = 'flutter.js?v=' + Date.now();
    script.defer = true;
    document.head.appendChild(script);
  </script>

  <script>
    window.addEventListener('load', function () {
      if (window._flutter && window._flutter.loader) {
        window._flutter.loader.loadEntrypoint({
          onEntrypointLoaded: function (engineInitializer) {
            engineInitializer.initializeEngine().then(function (appRunner) {
              return appRunner.runApp();
            });
          }
        });
      } else {
        console.error('[Flutter] flutter.js loaded but _flutter.loader is not available.');
      }
    });
  </script>

  <!-- Service Worker Registration -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        if (location.hostname === 'localhost' || location.hostname === '127.0.0.1') {
          console.log('[SW] Skipped registration on localhost.');
          return;
        }
        navigator.serviceWorker.register('/service-worker.js')
          .then((registration) => {
            console.log('[SW] Service Worker registered with scope:', registration.scope);
          })
          .catch((err) => {
            console.log('[SW] Service Worker registration failed:', err);
          });
      });
    }
  </script>
</body>
</html>
